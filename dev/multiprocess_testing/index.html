<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Multiprocess Testing · OrgMaintenanceScripts.jl</title><meta name="title" content="Multiprocess Testing · OrgMaintenanceScripts.jl"/><meta property="og:title" content="Multiprocess Testing · OrgMaintenanceScripts.jl"/><meta property="twitter:title" content="Multiprocess Testing · OrgMaintenanceScripts.jl"/><meta name="description" content="Documentation for OrgMaintenanceScripts.jl."/><meta property="og:description" content="Documentation for OrgMaintenanceScripts.jl."/><meta property="twitter:description" content="Documentation for OrgMaintenanceScripts.jl."/><meta property="og:url" content="https://docs.sciml.ai/OrgMaintenanceScripts/stable/multiprocess_testing/"/><meta property="twitter:url" content="https://docs.sciml.ai/OrgMaintenanceScripts/stable/multiprocess_testing/"/><link rel="canonical" href="https://docs.sciml.ai/OrgMaintenanceScripts/stable/multiprocess_testing/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="OrgMaintenanceScripts.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">OrgMaintenanceScripts.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../formatting/">Formatting Maintenance</a></li><li><a class="tocitem" href="../version_bumping/">Version Bumping</a></li><li><a class="tocitem" href="../compat_bumping/">Compat Bumping</a></li><li><a class="tocitem" href="../min_version_fixing/">Minimum Version Fixing</a></li><li><a class="tocitem" href="../version_check_finder/">Version Check Finder</a></li><li><a class="tocitem" href="../invalidation_analysis/">Invalidation Analysis</a></li><li><a class="tocitem" href="../import_timing_analysis/">Import Timing Analysis</a></li><li><a class="tocitem" href="../explicit_imports_fixing/">Explicit Imports Fixing</a></li><li><a class="tocitem" href="../documentation_cleanup/">Documentation Cleanup</a></li><li class="is-active"><a class="tocitem" href>Multiprocess Testing</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Key-Functions"><span>Key Functions</span></a></li><li><a class="tocitem" href="#Data-Structures"><span>Data Structures</span></a></li><li><a class="tocitem" href="#Usage-Examples"><span>Usage Examples</span></a></li><li><a class="tocitem" href="#Example-Output"><span>Example Output</span></a></li><li><a class="tocitem" href="#CI-Workflow-Compatibility"><span>CI Workflow Compatibility</span></a></li><li><a class="tocitem" href="#Performance-Considerations"><span>Performance Considerations</span></a></li><li><a class="tocitem" href="#Troubleshooting"><span>Troubleshooting</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Multiprocess Testing</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Multiprocess Testing</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SciML/OrgMaintenanceScripts.jl/blob/main/docs/src/multiprocess_testing.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Multiprocess-Testing"><a class="docs-heading-anchor" href="#Multiprocess-Testing">Multiprocess Testing</a><a id="Multiprocess-Testing-1"></a><a class="docs-heading-anchor-permalink" href="#Multiprocess-Testing" title="Permalink"></a></h1><p>The multiprocess testing functionality allows you to run tests in parallel similar to GitHub Actions CI workflows, but locally. This is particularly useful for large Julia packages with multiple test groups that can benefit from parallel execution.</p><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p>This module provides the ability to:</p><ul><li>Parse GitHub Actions CI workflow files to extract test groups</li><li>Run multiple test groups in parallel using Julia&#39;s <code>Distributed</code> module</li><li>Generate comprehensive logs for each test group</li><li>Provide detailed summaries of test results</li><li>Handle continue-on-error scenarios like GitHub Actions</li></ul><h2 id="Key-Functions"><a class="docs-heading-anchor" href="#Key-Functions">Key Functions</a><a id="Key-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Key-Functions" title="Permalink"></a></h2><h3 id="parse_ci_workflow(workflow_file::String)"><a class="docs-heading-anchor" href="#parse_ci_workflow(workflow_file::String)"><code>parse_ci_workflow(workflow_file::String)</code></a><a id="parse_ci_workflow(workflow_file::String)-1"></a><a class="docs-heading-anchor-permalink" href="#parse_ci_workflow(workflow_file::String)" title="Permalink"></a></h3><p>Parses a GitHub Actions CI workflow YAML file to extract test groups.</p><pre><code class="language-julia hljs">test_groups = parse_ci_workflow(&quot;.github/workflows/CI.yml&quot;)</code></pre><p><strong>Arguments:</strong></p><ul><li><code>workflow_file::String</code>: Path to the CI workflow YAML file</li></ul><p><strong>Returns:</strong></p><ul><li><code>Vector{TestGroup}</code>: List of test groups found in the workflow</li></ul><h3 id="run_multiprocess_tests(workflow_file::String,-project_path::String;-log_dir::String&quot;test_logs&quot;,-max_workers::Int4)"><a class="docs-heading-anchor" href="#run_multiprocess_tests(workflow_file::String,-project_path::String;-log_dir::String&quot;test_logs&quot;,-max_workers::Int4)"><code>run_multiprocess_tests(workflow_file::String, project_path::String; log_dir::String=&quot;test_logs&quot;, max_workers::Int=4)</code></a><a id="run_multiprocess_tests(workflow_file::String,-project_path::String;-log_dir::String&quot;test_logs&quot;,-max_workers::Int4)-1"></a><a class="docs-heading-anchor-permalink" href="#run_multiprocess_tests(workflow_file::String,-project_path::String;-log_dir::String&quot;test_logs&quot;,-max_workers::Int4)" title="Permalink"></a></h3><p>Runs tests in parallel based on a CI workflow file.</p><pre><code class="language-julia hljs">summary = run_multiprocess_tests(&quot;.github/workflows/CI.yml&quot;, &quot;.&quot;, log_dir=&quot;my_logs&quot;)
print_test_summary(summary)</code></pre><p><strong>Arguments:</strong></p><ul><li><code>workflow_file::String</code>: Path to the CI workflow YAML file</li><li><code>project_path::String</code>: Path to the project directory</li><li><code>log_dir::String</code>: Directory to write log files (default: &quot;test_logs&quot;)</li><li><code>max_workers::Int</code>: Maximum number of worker processes (default: 4)</li></ul><p><strong>Returns:</strong></p><ul><li><code>TestSummary</code>: Summary of all test results</li></ul><h3 id="run_tests_from_repo(repo_url::String;-kwargs...)"><a class="docs-heading-anchor" href="#run_tests_from_repo(repo_url::String;-kwargs...)"><code>run_tests_from_repo(repo_url::String; kwargs...)</code></a><a id="run_tests_from_repo(repo_url::String;-kwargs...)-1"></a><a class="docs-heading-anchor-permalink" href="#run_tests_from_repo(repo_url::String;-kwargs...)" title="Permalink"></a></h3><p>Clones a repository and runs its tests using the CI workflow configuration.</p><pre><code class="language-julia hljs">summary = run_tests_from_repo(&quot;https://github.com/SciML/OrdinaryDiffEq.jl&quot;)
print_test_summary(summary)</code></pre><p><strong>Arguments:</strong></p><ul><li><code>repo_url::String</code>: GitHub repository URL</li><li><code>branch::String</code>: Git branch to checkout (default: &quot;master&quot;)</li><li><code>workflow_path::String</code>: Path to CI workflow file (default: &quot;.github/workflows/CI.yml&quot;)</li><li><code>log_dir::String</code>: Directory for log files (default: &quot;test_logs&quot;)</li></ul><p><strong>Returns:</strong></p><ul><li><code>TestSummary</code>: Summary of test results</li></ul><h3 id="print_test_summary(summary::TestSummary)"><a class="docs-heading-anchor" href="#print_test_summary(summary::TestSummary)"><code>print_test_summary(summary::TestSummary)</code></a><a id="print_test_summary(summary::TestSummary)-1"></a><a class="docs-heading-anchor-permalink" href="#print_test_summary(summary::TestSummary)" title="Permalink"></a></h3><p>Prints a concise test summary to the console.</p><pre><code class="language-julia hljs">print_test_summary(summary)</code></pre><h3 id="generate_test_summary_report(summary::TestSummary,-output_file::Union{String,-Nothing}nothing)"><a class="docs-heading-anchor" href="#generate_test_summary_report(summary::TestSummary,-output_file::Union{String,-Nothing}nothing)"><code>generate_test_summary_report(summary::TestSummary, output_file::Union{String, Nothing}=nothing)</code></a><a id="generate_test_summary_report(summary::TestSummary,-output_file::Union{String,-Nothing}nothing)-1"></a><a class="docs-heading-anchor-permalink" href="#generate_test_summary_report(summary::TestSummary,-output_file::Union{String,-Nothing}nothing)" title="Permalink"></a></h3><p>Generates a comprehensive test summary report.</p><pre><code class="language-julia hljs">report = generate_test_summary_report(summary, &quot;test_report.txt&quot;)
println(report)</code></pre><h2 id="Data-Structures"><a class="docs-heading-anchor" href="#Data-Structures">Data Structures</a><a id="Data-Structures-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Structures" title="Permalink"></a></h2><h3 id="TestGroup"><a class="docs-heading-anchor" href="#TestGroup"><code>TestGroup</code></a><a id="TestGroup-1"></a><a class="docs-heading-anchor-permalink" href="#TestGroup" title="Permalink"></a></h3><p>Represents a single test group with its configuration.</p><p><strong>Fields:</strong></p><ul><li><code>name::String</code>: Name of the test group (e.g., &quot;InterfaceI&quot;)</li><li><code>env_vars::Dict{String, String}</code>: Environment variables to set during testing</li><li><code>continue_on_error::Bool</code>: Whether to continue if this group fails</li></ul><h3 id="TestResult"><a class="docs-heading-anchor" href="#TestResult"><code>TestResult</code></a><a id="TestResult-1"></a><a class="docs-heading-anchor-permalink" href="#TestResult" title="Permalink"></a></h3><p>Represents the result of running a test group.</p><p><strong>Fields:</strong></p><ul><li><code>group::TestGroup</code>: The test group that was run</li><li><code>success::Bool</code>: Whether the test group passed</li><li><code>duration::Float64</code>: Duration in seconds</li><li><code>log_file::String</code>: Path to the log file</li><li><code>error_message::Union{String, Nothing}</code>: Error message if failed</li><li><code>start_time::DateTime</code>: When the test started</li><li><code>end_time::DateTime</code>: When the test ended</li></ul><h3 id="TestSummary"><a class="docs-heading-anchor" href="#TestSummary"><code>TestSummary</code></a><a id="TestSummary-1"></a><a class="docs-heading-anchor-permalink" href="#TestSummary" title="Permalink"></a></h3><p>Summary of all test results.</p><p><strong>Fields:</strong></p><ul><li><code>total_groups::Int</code>: Total number of test groups</li><li><code>passed_groups::Int</code>: Number of groups that passed</li><li><code>failed_groups::Int</code>: Number of groups that failed</li><li><code>total_duration::Float64</code>: Total duration in seconds</li><li><code>results::Vector{TestResult}</code>: Individual test results</li><li><code>start_time::DateTime</code>: Overall start time</li><li><code>end_time::DateTime</code>: Overall end time</li></ul><h2 id="Usage-Examples"><a class="docs-heading-anchor" href="#Usage-Examples">Usage Examples</a><a id="Usage-Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Usage-Examples" title="Permalink"></a></h2><h3 id="Basic-Usage"><a class="docs-heading-anchor" href="#Basic-Usage">Basic Usage</a><a id="Basic-Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Usage" title="Permalink"></a></h3><pre><code class="language-julia hljs">using OrgMaintenanceScripts

# Run tests for a local package
summary = run_multiprocess_tests(&quot;.github/workflows/CI.yml&quot;, &quot;.&quot;, log_dir=&quot;test_logs&quot;)
print_test_summary(summary)

# Generate detailed report
generate_test_summary_report(summary, &quot;detailed_report.txt&quot;)</code></pre><h3 id="Testing-a-Remote-Repository"><a class="docs-heading-anchor" href="#Testing-a-Remote-Repository">Testing a Remote Repository</a><a id="Testing-a-Remote-Repository-1"></a><a class="docs-heading-anchor-permalink" href="#Testing-a-Remote-Repository" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Clone and test OrdinaryDiffEq.jl
summary = run_tests_from_repo(&quot;https://github.com/SciML/OrdinaryDiffEq.jl&quot;)
print_test_summary(summary)

# Check which groups failed
failed_groups = [r.group.name for r in summary.results if !r.success]
if !isempty(failed_groups)
    println(&quot;Failed groups: &quot;, join(failed_groups, &quot;, &quot;))
end</code></pre><h3 id="Parsing-Test-Groups"><a class="docs-heading-anchor" href="#Parsing-Test-Groups">Parsing Test Groups</a><a id="Parsing-Test-Groups-1"></a><a class="docs-heading-anchor-permalink" href="#Parsing-Test-Groups" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Just parse the workflow to see what groups exist
test_groups = parse_ci_workflow(&quot;.github/workflows/CI.yml&quot;)
for group in test_groups
    println(&quot;Group: $(group.name)&quot;)
    println(&quot;  Environment: $(group.env_vars)&quot;)
    println(&quot;  Continue on error: $(group.continue_on_error)&quot;)
end</code></pre><h3 id="Custom-Configuration"><a class="docs-heading-anchor" href="#Custom-Configuration">Custom Configuration</a><a id="Custom-Configuration-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-Configuration" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Run with custom settings
summary = run_multiprocess_tests(
    &quot;.github/workflows/CI.yml&quot;,
    &quot;.&quot;,
    log_dir=&quot;custom_logs&quot;,
    max_workers=8  # Use more workers for faster execution
)</code></pre><h2 id="Example-Output"><a class="docs-heading-anchor" href="#Example-Output">Example Output</a><a id="Example-Output-1"></a><a class="docs-heading-anchor-permalink" href="#Example-Output" title="Permalink"></a></h2><pre><code class="nohighlight hljs">============================================================
TEST SUMMARY
============================================================
Total: 37 | Passed: 35 | Failed: 2 | Success: 94.6%
Duration: 1847.32 seconds

Failed Groups:
  • Downstream (test_logs/Downstream.log)
  • ModelingToolkit (test_logs/ModelingToolkit.log)
============================================================</code></pre><h2 id="CI-Workflow-Compatibility"><a class="docs-heading-anchor" href="#CI-Workflow-Compatibility">CI Workflow Compatibility</a><a id="CI-Workflow-Compatibility-1"></a><a class="docs-heading-anchor-permalink" href="#CI-Workflow-Compatibility" title="Permalink"></a></h2><p>The parser supports standard GitHub Actions CI workflow files with the following structure:</p><pre><code class="language-yaml hljs">name: CI
jobs:
  test:
    runs-on: ubuntu-latest
    continue-on-error: ${{ matrix.group == &#39;Downstream&#39; }}
    strategy:
      fail-fast: false
      matrix:
        group:
          - InterfaceI
          - InterfaceII
          - OrdinaryDiffEqCore
          - Downstream
        version:
          - &#39;1&#39;
    steps:
      - uses: actions/checkout@v4
      - uses: julia-actions/setup-julia@v2
      - uses: julia-actions/julia-runtest@v1
        env:
          GROUP: ${{ matrix.group }}</code></pre><p>Key features supported:</p><ul><li>Automatic extraction of test group names from the <code>matrix.group</code> section</li><li>Recognition of <code>continue-on-error</code> expressions to identify groups that should not fail the overall test suite</li><li>Setting of the <code>GROUP</code> environment variable for each test group</li></ul><h2 id="Performance-Considerations"><a class="docs-heading-anchor" href="#Performance-Considerations">Performance Considerations</a><a id="Performance-Considerations-1"></a><a class="docs-heading-anchor-permalink" href="#Performance-Considerations" title="Permalink"></a></h2><ul><li><strong>Parallel Execution</strong>: Tests run in parallel using <code>pmap()</code>, significantly reducing total execution time</li><li><strong>Worker Management</strong>: The system automatically adds worker processes as needed, up to the specified maximum</li><li><strong>Memory Usage</strong>: Each test group runs in its own process, preventing memory leaks from affecting other tests</li><li><strong>Log Isolation</strong>: Individual log files prevent output mixing between parallel test groups</li></ul><h2 id="Troubleshooting"><a class="docs-heading-anchor" href="#Troubleshooting">Troubleshooting</a><a id="Troubleshooting-1"></a><a class="docs-heading-anchor-permalink" href="#Troubleshooting" title="Permalink"></a></h2><h3 id="Common-Issues"><a class="docs-heading-anchor" href="#Common-Issues">Common Issues</a><a id="Common-Issues-1"></a><a class="docs-heading-anchor-permalink" href="#Common-Issues" title="Permalink"></a></h3><ol><li><strong>Missing CI Workflow File</strong>: Ensure the workflow file exists at the specified path</li><li><strong>YAML Parsing Errors</strong>: Verify the workflow file has valid YAML syntax</li><li><strong>Environment Setup</strong>: Make sure the project has a valid <code>Project.toml</code> file</li><li><strong>Worker Process Limits</strong>: Adjust <code>max_workers</code> based on available system resources</li></ol><h3 id="Log-Files"><a class="docs-heading-anchor" href="#Log-Files">Log Files</a><a id="Log-Files-1"></a><a class="docs-heading-anchor-permalink" href="#Log-Files" title="Permalink"></a></h3><p>Each test group generates its own log file in the specified log directory:</p><ul><li><code>test_logs/GroupName.log</code> - Contains all output from that specific test group</li><li>Logs include timestamps, environment variables, and full test output</li><li>Failed tests include error messages and stack traces</li></ul><h3 id="Environment-Variables"><a class="docs-heading-anchor" href="#Environment-Variables">Environment Variables</a><a id="Environment-Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Environment-Variables" title="Permalink"></a></h3><p>The system temporarily sets environment variables for each test group:</p><ul><li><code>GROUP=&lt;group_name&gt;</code> - The primary variable used by most Julia test suites</li><li>Additional variables can be configured in the <code>TestGroup</code> structure</li><li>Variables are cleaned up after each test group completes</li></ul><p>This functionality is particularly useful for large SciML packages like OrdinaryDiffEq.jl that have dozens of test groups and can benefit significantly from parallel execution.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../documentation_cleanup/">« Documentation Cleanup</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Saturday 2 August 2025 20:00">Saturday 2 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
