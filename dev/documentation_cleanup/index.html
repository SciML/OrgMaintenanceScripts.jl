<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Documentation Cleanup · OrgMaintenanceScripts.jl</title><meta name="title" content="Documentation Cleanup · OrgMaintenanceScripts.jl"/><meta property="og:title" content="Documentation Cleanup · OrgMaintenanceScripts.jl"/><meta property="twitter:title" content="Documentation Cleanup · OrgMaintenanceScripts.jl"/><meta name="description" content="Documentation for OrgMaintenanceScripts.jl."/><meta property="og:description" content="Documentation for OrgMaintenanceScripts.jl."/><meta property="twitter:description" content="Documentation for OrgMaintenanceScripts.jl."/><meta property="og:url" content="https://docs.sciml.ai/OrgMaintenanceScripts/stable/documentation_cleanup/"/><meta property="twitter:url" content="https://docs.sciml.ai/OrgMaintenanceScripts/stable/documentation_cleanup/"/><link rel="canonical" href="https://docs.sciml.ai/OrgMaintenanceScripts/stable/documentation_cleanup/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="OrgMaintenanceScripts.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">OrgMaintenanceScripts.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../formatting/">Formatting Maintenance</a></li><li><a class="tocitem" href="../version_bumping/">Version Bumping</a></li><li><a class="tocitem" href="../compat_bumping/">Compat Bumping</a></li><li><a class="tocitem" href="../min_version_fixing/">Minimum Version Fixing</a></li><li><a class="tocitem" href="../version_check_finder/">Version Check Finder</a></li><li><a class="tocitem" href="../invalidation_analysis/">Invalidation Analysis</a></li><li><a class="tocitem" href="../import_timing_analysis/">Import Timing Analysis</a></li><li><a class="tocitem" href="../explicit_imports_fixing/">Explicit Imports Fixing</a></li><li class="is-active"><a class="tocitem" href>Documentation Cleanup</a><ul class="internal"><li><a class="tocitem" href="#Problem-Description"><span>Problem Description</span></a></li><li><a class="tocitem" href="#Functions"><span>Functions</span></a></li><li><a class="tocitem" href="#Safety-Features"><span>Safety Features</span></a></li><li><a class="tocitem" href="#Common-Workflow"><span>Common Workflow</span></a></li><li><a class="tocitem" href="#What-Gets-Cleaned"><span>What Gets Cleaned</span></a></li><li><a class="tocitem" href="#Best-Practices"><span>Best Practices</span></a></li><li><a class="tocitem" href="#Integration-with-Other-Tools"><span>Integration with Other Tools</span></a></li><li><a class="tocitem" href="#Example-Output"><span>Example Output</span></a></li></ul></li><li><a class="tocitem" href="../multiprocess_testing/">Multiprocess Testing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Documentation Cleanup</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Documentation Cleanup</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SciML/OrgMaintenanceScripts.jl/blob/main/docs/src/documentation_cleanup.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Documentation-Cleanup"><a class="docs-heading-anchor" href="#Documentation-Cleanup">Documentation Cleanup</a><a id="Documentation-Cleanup-1"></a><a class="docs-heading-anchor-permalink" href="#Documentation-Cleanup" title="Permalink"></a></h1><p>The documentation cleanup functionality addresses the common problem of repository bloat caused by large HTML files with embedded SVG plots from documentation builds.</p><h2 id="Problem-Description"><a class="docs-heading-anchor" href="#Problem-Description">Problem Description</a><a id="Problem-Description-1"></a><a class="docs-heading-anchor-permalink" href="#Problem-Description" title="Permalink"></a></h2><p>Julia packages with documentation often generate very large HTML files (30+ MB) when:</p><ul><li>Tutorials contain complex plots rendered as SVG</li><li>Multiple documentation versions are preserved </li><li>CI builds create preview/development versions</li><li>Large embedded plots are stored inline in HTML</li></ul><p>This leads to:</p><ul><li>Gigabyte-sized repositories that are slow to clone</li><li>Poor developer experience for contributors</li><li>Wasted storage and bandwidth</li><li>Slow documentation website loading</li></ul><h2 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h2><h3 id="cleanup_gh_pages_docs"><a class="docs-heading-anchor" href="#cleanup_gh_pages_docs"><code>cleanup_gh_pages_docs</code></a><a id="cleanup_gh_pages_docs-1"></a><a class="docs-heading-anchor-permalink" href="#cleanup_gh_pages_docs" title="Permalink"></a></h3><pre><code class="language-julia hljs">cleanup_gh_pages_docs(repo_path::String; 
                     preserve_latest::Bool=true, 
                     dry_run::Bool=false, 
                     size_threshold_mb::Float64=5.0)</code></pre><p>Clean up bloated documentation in a repository&#39;s gh-pages branch.</p><p><strong>Arguments:</strong></p><ul><li><code>repo_path</code>: Path to the Git repository</li><li><code>preserve_latest</code>: Whether to preserve the latest version documentation (default: true)</li><li><code>dry_run</code>: If true, only show what would be cleaned without making changes (default: false)</li><li><code>size_threshold_mb</code>: Remove files larger than this threshold in MB (default: 5.0)</li></ul><p><strong>Returns:</strong> A named tuple with cleanup statistics including files removed, size saved, and success status.</p><p><strong>Example:</strong></p><pre><code class="language-julia hljs"># Safe dry run first
result = cleanup_gh_pages_docs(&quot;/path/to/repo&quot;, dry_run=true)
println(&quot;Would save: $(result.size_saved_mb) MB&quot;)

# Actual cleanup
result = cleanup_gh_pages_docs(&quot;/path/to/repo&quot;)
if result.success
    println(&quot;Cleaned $(result.files_removed) files&quot;)
    println(&quot;⚠️  Run: git push --force origin gh-pages&quot;)
end</code></pre><h3 id="analyze_gh_pages_bloat"><a class="docs-heading-anchor" href="#analyze_gh_pages_bloat"><code>analyze_gh_pages_bloat</code></a><a id="analyze_gh_pages_bloat-1"></a><a class="docs-heading-anchor-permalink" href="#analyze_gh_pages_bloat" title="Permalink"></a></h3><pre><code class="language-julia hljs">analyze_gh_pages_bloat(repo_path::String)</code></pre><p>Analyze documentation bloat without making changes. Perfect for understanding the scope of the problem before cleanup.</p><p><strong>Returns:</strong> Analysis results including total size, large files list, and detailed report.</p><p><strong>Example:</strong></p><pre><code class="language-julia hljs">analysis = analyze_gh_pages_bloat(&quot;/path/to/repo&quot;)
println(&quot;Repository has $(analysis.total_size_mb) MB of bloat&quot;)
println(&quot;Largest files:&quot;)
for file in analysis.large_files[1:5]
    println(&quot;  $(file.size_mb) MB - $(file.path)&quot;)
end</code></pre><h3 id="cleanup_org_gh_pages_docs"><a class="docs-heading-anchor" href="#cleanup_org_gh_pages_docs"><code>cleanup_org_gh_pages_docs</code></a><a id="cleanup_org_gh_pages_docs-1"></a><a class="docs-heading-anchor-permalink" href="#cleanup_org_gh_pages_docs" title="Permalink"></a></h3><pre><code class="language-julia hljs">cleanup_org_gh_pages_docs(org_repos::Vector{String}; 
                          preserve_latest::Bool=true,
                          dry_run::Bool=false, 
                          size_threshold_mb::Float64=5.0,
                          working_dir::String=mktempdir())</code></pre><p>Clean up documentation bloat across multiple repositories in an organization.</p><p><strong>Example:</strong></p><pre><code class="language-julia hljs">repos = [
    &quot;https://github.com/SciML/DifferentialEquations.jl.git&quot;,
    &quot;https://github.com/SciML/JumpProcesses.jl.git&quot;
]

results = cleanup_org_gh_pages_docs(repos, dry_run=true)
total_savings = sum(r.size_saved_mb for r in results if r.success)
println(&quot;Organization could save $(total_savings) MB&quot;)</code></pre><h2 id="Safety-Features"><a class="docs-heading-anchor" href="#Safety-Features">Safety Features</a><a id="Safety-Features-1"></a><a class="docs-heading-anchor-permalink" href="#Safety-Features" title="Permalink"></a></h2><p>The documentation cleanup functions are designed with safety in mind:</p><ul><li><strong>Dry-run mode</strong>: Test what would be cleaned without making changes</li><li><strong>Latest version preservation</strong>: Automatically detects and preserves the most recent documentation</li><li><strong>Branch isolation</strong>: Only operates on gh-pages branch, never touches code branches or tags</li><li><strong>Error handling</strong>: Comprehensive validation and error recovery</li><li><strong>Git cleanup</strong>: Proper garbage collection to reclaim space</li></ul><h2 id="Common-Workflow"><a class="docs-heading-anchor" href="#Common-Workflow">Common Workflow</a><a id="Common-Workflow-1"></a><a class="docs-heading-anchor-permalink" href="#Common-Workflow" title="Permalink"></a></h2><ol><li><p><strong>Analyze the problem:</strong></p><pre><code class="language-julia hljs">analysis = analyze_gh_pages_bloat(&quot;/path/to/repo&quot;)</code></pre></li><li><p><strong>Test the cleanup safely:</strong></p><pre><code class="language-julia hljs">result = cleanup_gh_pages_docs(&quot;/path/to/repo&quot;, dry_run=true)</code></pre></li><li><p><strong>Perform the cleanup:</strong></p><pre><code class="language-julia hljs">result = cleanup_gh_pages_docs(&quot;/path/to/repo&quot;)</code></pre></li><li><p><strong>Force push the changes:</strong></p><pre><code class="language-bash hljs">git push --force origin gh-pages</code></pre></li><li><p><strong>Notify contributors</strong> about the history rewrite</p></li></ol><h2 id="What-Gets-Cleaned"><a class="docs-heading-anchor" href="#What-Gets-Cleaned">What Gets Cleaned</a><a id="What-Gets-Cleaned-1"></a><a class="docs-heading-anchor-permalink" href="#What-Gets-Cleaned" title="Permalink"></a></h2><p>The cleanup process identifies and removes:</p><ul><li><strong>Old version directories</strong>: <code>v1.0.0/</code>, <code>v1.1.0/</code>, etc. (except latest)</li><li><strong>Development builds</strong>: <code>dev/</code>, <code>previews/</code>, <code>preview-*/</code></li><li><strong>Large files</strong>: Files exceeding the size threshold (default 5MB)</li><li><strong>Git objects</strong>: Runs garbage collection to reclaim space</li></ul><h2 id="Best-Practices"><a class="docs-heading-anchor" href="#Best-Practices">Best Practices</a><a id="Best-Practices-1"></a><a class="docs-heading-anchor-permalink" href="#Best-Practices" title="Permalink"></a></h2><ol><li><strong>Always run analysis first</strong> to understand the scope</li><li><strong>Use dry-run mode</strong> before actual cleanup</li><li><strong>Backup important repositories</strong> before running</li><li><strong>Coordinate with team</strong> before rewriting Git history</li><li><strong>Run during low-activity periods</strong> to minimize disruptions</li><li><strong>Combine with PNG plot fixes</strong> for comprehensive solution</li></ol><h2 id="Integration-with-Other-Tools"><a class="docs-heading-anchor" href="#Integration-with-Other-Tools">Integration with Other Tools</a><a id="Integration-with-Other-Tools-1"></a><a class="docs-heading-anchor-permalink" href="#Integration-with-Other-Tools" title="Permalink"></a></h2><p>The documentation cleanup works best when combined with:</p><ul><li><strong>PNG plot forcing</strong>: Prevent future SVG bloat in documentation builds</li><li><strong>Size limits</strong>: Set <code>example_size_threshold</code> in Documenter.jl</li><li><strong>CI optimizations</strong>: Limit preview builds and retention periods</li><li><strong>Regular maintenance</strong>: Schedule periodic cleanup for active repositories</li></ul><h2 id="Example-Output"><a class="docs-heading-anchor" href="#Example-Output">Example Output</a><a id="Example-Output-1"></a><a class="docs-heading-anchor-permalink" href="#Example-Output" title="Permalink"></a></h2><pre><code class="nohighlight hljs">Documentation Cleanup Tool - Analysis Results:
  Total documentation size: 6074.5 MB
  Number of versions: 15
  Latest version: v2.1.0
  Large files found: 415

Top 5 largest files:
    37.8 MB - previews/PR345/tutorials/example/index.html
    37.8 MB - dev/tutorials/example/index.html  
    37.6 MB - v1.5.0/tutorials/example/index.html
    35.2 MB - v1.4.0/tutorials/example/index.html
    34.9 MB - v1.3.0/tutorials/example/index.html

DRY RUN - Would remove:
  160 large files (5366.8 MB)
  12 old version directories
    - v1.0.0/
    - v1.1.0/
    - v1.2.0/
    - dev/
    - previews/
    - preview-123/</code></pre><p>This functionality can dramatically reduce repository sizes and improve the developer experience across the SciML ecosystem.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../explicit_imports_fixing/">« Explicit Imports Fixing</a><a class="docs-footer-nextpage" href="../multiprocess_testing/">Multiprocess Testing »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Saturday 2 August 2025 20:00">Saturday 2 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
